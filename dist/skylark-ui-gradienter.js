/**
 * skylark-ui-gradienter - The skylark gradient picker widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-gradienter/
 * @license MIT
 */
!function(e,t){function r(e,t){if("."!==e[0])return e;var r=t.split("/"),i=e.split("/");r.pop();for(var n=0;n<i.length;n++)"."!=i[n]&&(".."==i[n]?r.pop():r.push(i[n]));return r.join("/")}var i=t.define,n=t.require,a="function"==typeof i&&i.amd,s=!a&&"undefined"!=typeof exports;if(!a&&!i){var o={};i=t.define=function(e,t,i){"function"==typeof i?(o[e]={factory:i,deps:t.map(function(t){return r(t,e)}),exports:null},n(e)):o[e]=i},n=t.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var t=o[e];if(!t.exports){var r=[];t.deps.forEach(function(e){r.push(n(e))}),t.exports=t.factory.apply(window,r)}return t.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(e(i,n),!a){var d=n("skylark-langx/skylark");s?exports=d:t.skylarkjs=d}}(function(e,t){e("skylark-ui-gradienter/Drag",[],function(){var e={obj:null,gradx:null,init:function(t,r,i,n,a,s,o,d,l,g){t.onmousedown=e.start,t.hmode=!o,t.vmode=!d,t.root=r&&null!=r?r:t,t.hmode&&isNaN(parseInt(t.root.style.left))&&(t.root.style.left="0px"),!t.hmode&&isNaN(parseInt(t.root.style.right))&&(t.root.style.right="0px"),t.minX="undefined"!=typeof i?i:null,t.minY="undefined"!=typeof a?a:null,t.maxX="undefined"!=typeof n?n:null,t.maxY="undefined"!=typeof s?s:null,t.xMapper=l?l:null,t.yMapper=g?g:null,t.root.onDragStart=new Function,t.root.onDragEnd=new Function,t.root.onDrag=new Function},start:function(t){e.gradx.current_slider_id="#"+this.id;var r=e.obj=this;t=e.fixE(t);var i=parseInt(r.vmode?r.root.style.top:r.root.style.bottom),n=parseInt(r.hmode?r.root.style.left:r.root.style.right);return r.root.onDragStart(n,i),r.lastMouseX=t.clientX,r.lastMouseY=t.clientY,r.hmode?(null!=r.minX&&(r.minMouseX=t.clientX-n+r.minX),null!=r.maxX&&(r.maxMouseX=r.minMouseX+r.maxX-r.minX)):(null!=r.minX&&(r.maxMouseX=-r.minX+t.clientX+n),null!=r.maxX&&(r.minMouseX=-r.maxX+t.clientX+n)),r.vmode?(null!=r.minY&&(r.minMouseY=t.clientY-i+r.minY),null!=r.maxY&&(r.maxMouseY=r.minMouseY+r.maxY-r.minY)):(null!=r.minY&&(r.maxMouseY=-r.minY+t.clientY+i),null!=r.maxY&&(r.minMouseY=-r.maxY+t.clientY+i)),document.onmousemove=e.drag,document.onmouseup=e.end,!1},drag:function(t){t=e.fixE(t);var r=e.obj;e.gradx.update_style_array(),e.gradx.apply_style(e.gradx.panel,e.gradx.get_style_value());var i=e.gradx.gx("#"+r.id).css("left");parseInt(i)>60&&parseInt(i)<390&&e.gradx.gx("#gradx_slider_info").css("left",i).show();var n=e.gradx.gx("#"+r.id).css("backgroundColor"),a=e.gradx.get_rgb_obj(n);e.gradx.cp.colorPicker("set",a);var s,o,d=t.clientY,l=t.clientX,g=parseInt(r.vmode?r.root.style.top:r.root.style.bottom),_=parseInt(r.hmode?r.root.style.left:r.root.style.right);return null!=r.minX&&(l=r.hmode?Math.max(l,r.minMouseX):Math.min(l,r.maxMouseX)),null!=r.maxX&&(l=r.hmode?Math.min(l,r.maxMouseX):Math.max(l,r.minMouseX)),null!=r.minY&&(d=r.vmode?Math.max(d,r.minMouseY):Math.min(d,r.maxMouseY)),null!=r.maxY&&(d=r.vmode?Math.min(d,r.maxMouseY):Math.max(d,r.minMouseY)),s=_+(l-r.lastMouseX)*(r.hmode?1:-1),o=g+(d-r.lastMouseY)*(r.vmode?1:-1),r.xMapper?s=r.xMapper(g):r.yMapper&&(o=r.yMapper(_)),e.obj.root.style[r.hmode?"left":"right"]=s+"px",e.obj.lastMouseX=l,e.obj.lastMouseY=d,e.obj.root.onDrag(s,o),!1},end:function(){document.onmousemove=null,document.onmouseup=null,e.obj.root.onDragEnd(parseInt(e.obj.root.style[e.obj.hmode?"left":"right"]),parseInt(e.obj.root.style[e.obj.vmode?"top":"bottom"])),e.obj=null},fixE:function(e){return"undefined"==typeof e&&(e=window.event),"undefined"==typeof e.layerX&&(e.layerX=e.offsetX),"undefined"==typeof e.layerY&&(e.layerY=e.offsetY),e}};return e}),e("skylark-ui-gradienter/Gradienter",["skylark-langx/skylark","skylark-langx/langx","skylark-utils/browser","skylark-utils/noder","skylark-utils/eventer","skylark-utils/finder","skylark-utils/query","skylark-utils-color/colors","skylark-utils-color/Color","skylark-ui-swt/ui","skylark-ui-swt/Widget","skylark-ui-colorpicker/ColorPicker","./Drag"],function(e,t,r,i,n,a,s,o,d,l,g,_,c){"use strict";"undefined"==typeof s.fn.draggable&&(s.fn.draggable=function(){var e=document.getElementById(this.attr("id"));return e.style.top="121px",c.init(e,null,26,426,86,86),this});var u=l.Gradienter=function(e,r){function i(e,t,r){e.attachEvent?e.attachEvent("on"+t,function(){r.call(e)}):e.addEventListener&&e.addEventListener(t,r,!1)}var n={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(e,t){}},a=c.gradx={rand_RGB:[],rand_pos:[],id:null,slider_ids:[],slider_index:0,sliders:[],direction:"left",type:"linear",shape:"cover",slider_hovered:[],jQ_present:!0,code_shown:!1,load_jQ:function(){this.gx=s},add_event:function(e,t,r){i(e,t,r)},get_random_position:function(){var e;do e=parseInt(100*Math.random());while(this.rand_pos.indexOf(e)>-1);return this.rand_pos.push(e),e},get_random_rgb:function(){var e,t,r,i;do e=parseInt(255*Math.random()),t=parseInt(255*Math.random()),r=parseInt(255*Math.random()),i="rgb("+e+", "+t+", "+r+")";while(this.rand_RGB.indexOf(i)>-1);return this.rand_RGB.push(i),i},update_target:function(e){if(this.targets.length>0){var t,r,i,n=this.targets.length,s=e.length;for(t=0;t<n;t++)for(i=a.gx(this.targets[t]),r=0;r<s;r++)i.css("background-image",e[r])}},apply_style:function(e,t){var r="linear";if("linear"!=a.type&&(r="radial"),t.indexOf(this.direction)>-1)var i=["-webkit-"+r+"-gradient("+t+")","-moz-"+r+"-gradient("+t+")","-ms-"+r+"-gradient("+t+")","-o-"+r+"-gradient("+t+")",r+"-gradient("+t+")"];else i=[t];for(var n=i.length,s="";n>0;)n--,e.css("background",i[n]),s+="background: "+i[n]+";\n";this.change(this.sliders,i),this.update_target(i),a.gx("#gradx_code").html(s)},apply_default_styles:function(){this.update_style_array();var e=this.get_style_value();this.apply_style(this.panel,e)},update_style_array:function(){this.sliders=[];var e,t,r,i,n=a.slider_ids.length;for(e=0;e<n;e++)i="#"+a.slider_ids[e],t=parseInt(a.gx(i).css("left")),r=parseInt(t/a.container_width*100),r-=6,a.sliders.push([a.gx(i).css("background-color"),r]);this.sliders.sort(function(e,t){return e[1]>t[1]?1:-1})},get_style_value:function(){var e=a.slider_ids.length;if(1===e)t=this.sliders[0][0];else{for(var t="",r="",i=0;i<e;i++)""==this.sliders[i][1]?t+=r+this.sliders[i][0]:(this.sliders[i][1]>100&&(this.sliders[i][1]=100),t+=r+(this.sliders[i][0]+" "+this.sliders[i][1]+"%")),r=" , ";t="linear"==this.type?this.direction+" , "+t:this.direction+" , "+this.type+" "+this.shape+" , "+t}return t},get_rgb_obj:function(e){return e=e.split("("),e=e[1],e=e.split(","),{r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2])}},load_info:function(e){var t="#"+e.id;if(this.current_slider_id=t,this.slider_ids.indexOf(e.id)>-1){var r=a.gx(t).css("backgroundColor"),i=this.get_rgb_obj(r),n=a.gx(t).css("left");parseInt(n)>26&&parseInt(n)<426&&a.gx("#gradx_slider_info").css("left",n).show(),this.set_colorpicker(i),console.log(i)}},add_slider:function(e){var t,r,i,n,s;0===e.length&&(e=[{color:a.get_random_rgb(),position:a.get_random_position()},{color:a.get_random_rgb(),position:a.get_random_position()}]);var o=e;for(i in o){if("undefined"==typeof o[i].position)break;var s=26;n=parseInt(o[i].position*this.container_width/100)+s+"px",t="gradx_slider_"+this.slider_index,this.sliders.push([o[i].color,o[i].position]),this.slider_ids.push(t),r="<div class='gradx_slider' id='"+t+"'></div>",a.gx("#gradx_start_sliders_"+this.id).append(r),a.gx("#"+t).css("backgroundColor",o[i].color).css("left",n),this.slider_index++}for(var d=0,l=this.slider_ids.length;d<l;d++)a.gx("#"+this.slider_ids[d]).draggable({containment:"parent",axis:"x",start:function(){a.jQ_present&&(a.current_slider_id="#"+a.gx(this).attr("id"))},drag:function(){a.update_style_array(),a.apply_style(a.panel,a.get_style_value());var e=a.gx(a.current_slider_id).css("left");parseInt(e)>26&&parseInt(e)<426&&a.gx("#gradx_slider_info").css("left",e).show();var t=a.gx(a.current_slider_id).css("backgroundColor"),r=a.get_rgb_obj(t);a.cp.colorPicker("set",r)}}).click(function(){return a.load_info(this),!1})},set_colorpicker:function(e){a.cp.colorPicker({move:function(e){if(0!=a.current_slider_id){var t=e.toRgbString();a.gx(a.current_slider_id).css("background-color",t),a.update_style_array(),a.apply_style(a.panel,a.get_style_value())}},change:function(){a.gx("#gradx_slider_info").hide()},flat:!0,showAlpha:!0,color:e,clickoutFiresChange:!0,showInput:!0,showButtons:!1})},generate_options:function(e){for(var t,r,i=e.length,n="",a=0;a<i;a++)t=e[a].split(" "),t=t[0],r=a<2?t[1]:"",t=t.replace("-"," "),n+="<option value="+e[a]+" "+r+">"+t+"</option>";return n},generate_radial_options:function(){var e;e=["horizontal-center disabled","center selected","left","right"],a.gx("#gradx_gradient_subtype").html(a.generate_options(e)),e=["vertical-center disabled","center selected","top","bottom"],a.gx("#gradx_gradient_subtype2").html(a.generate_options(e)).show()},generate_linear_options:function(){var e;e=["horizontal-center disabled","left selected","right","top","bottom"],a.gx("#gradx_gradient_subtype").html(a.generate_options(e)),a.gx("#gradx_gradient_subtype2").hide()},destroy:function(){var e={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(e,t){}};for(var t in e)a[t]=e[t]},load_gradx:function(e,t){this.me=a.gx(e),this.id=e.replace("#",""),e=this.id,this.current_slider_id=!1;var r="<div class='gradx'>\n                            <div id='gradx_add_slider' class='gradx_add_slider gradx_btn'><i class='icon icon-add'></i>add</div>\n                            <div class='gradx_slectboxes'>\n                            <select id='gradx_gradient_type' class='gradx_gradient_type'>\n                                <option value='linear'>Linear</option>\n                                <option value='circle'>Radial - Circle</option>\n                                <option value='ellipse'>Radial - Ellipse</option>\n                            </select>\n                            <select id='gradx_gradient_subtype' class='gradx_gradient_type'>\n                                <option id='gradx_gradient_subtype_desc' value='gradient-direction' disabled>gradient direction</option>\n                                <option value='left' selected>Left</option>\n                                <option value='right'>Right</option>\n                                <option value='top'>Top</option>\n                                <option value='bottom'>Bottom</option>\n                            </select>\n                            <select id='gradx_gradient_subtype2' class='gradx_gradient_type gradx_hide'>\n                            </select>\n                            <select id='gradx_radial_gradient_size' class='gradx_gradient_type gradx_hide'>\n                            </select>\n                            </div>\n                            <div class='gradx_container' id='gradx_"+e+"'>\n                                <div id='gradx_stop_sliders_"+e+"'></div>\n                                <div class='gradx_panel' id='gradx_panel_"+e+"'></div>\n                                <div class='gradx_start_sliders' id='gradx_start_sliders_"+e+"'>\n                                    <div class='cp-default' id='gradx_slider_info'>\n                                        <div id='gradx_slider_controls'>\n                                            <div id='gradx_delete_slider' class='gradx_btn'><i class='icon icon-remove'></i>delete</div>\n                                        </div>\n                                        <div id='gradx_slider_content'></div>\n                                    </div> \n                                </div>\n                            </div>\n                            <div id='gradx_show_code' class='gradx_show_code gradx_btn'><i class='icon icon-file-css'></i><span>show the code</span></div>\n                            <div id='gradx_show_presets' style='display:none' class='gradx_show_presets gradx_btn'><i class='icon icon-preset'></i><span>show presets</span></div>\n                            <textarea class='gradx_code' id='gradx_code'></textarea>\n                        </div>";this.me.html(r);var i=["gradient-size disabled","closest-side selected","closest-corner","farthest-side","farthest-corner","contain","cover"],n="";if(n=a.generate_options(i),a.gx("#gradx_radial_gradient_size").html(n),this.container=a.gx("#gradx_"+e),this.panel=a.gx("#gradx_panel_"+e),this.container_width=400,this.add_slider(t),a.add_event(document,"click",function(){if(!a.slider_hovered[e])return a.gx("#gradx_slider_info").hide(),!1}),a.gx("#gradx_add_slider").click(function(){a.add_slider([{color:a.get_random_rgb(),position:a.get_random_position()}]),a.update_style_array(),a.apply_style(a.panel,a.get_style_value())}),a.cp=a.gx("#gradx_slider_content"),a.set_colorpicker("blue"),a.gx("#gradx_delete_slider").click(function(){a.gx(a.current_slider_id).remove(),a.gx("#gradx_slider_info").hide();for(var e=a.current_slider_id.replace("#",""),t=0;t<a.slider_ids.length;t++)a.slider_ids[t]==e&&a.slider_ids.splice(t,1);a.update_style_array(),a.apply_style(a.panel,a.get_style_value()),a.current_slider_id=!1}),a.gx("#gradx_code").focus(function(){var e=a.gx(this);e.select(),e.mouseup(function(){return e.unbind("mouseup"),!1})}),a.gx("#gradx_gradient_type").change(function(){var e=a.gx(this).val();"linear"!==e?a.generate_radial_options():(a.generate_linear_options(),a.gx("#gradx_gradient_subtype").val("left")),a.type=e,a.direction=a.gx("#gradx_gradient_subtype").val(),a.apply_style(a.panel,a.get_style_value())}),"linear"!==this.type){a.gx("#gradx_gradient_type").val(this.type),a.generate_radial_options();var s,o;if("left"!==this.direction){var d;d=this.direction.indexOf(",")>-1?this.direction.split(","):this.direction.split(" "),s=d[0],o=d[1],a.gx("#gradx_gradient_subtype").val(s),a.gx("#gradx_gradient_subtype2").val(o)}else var s=a.gx("#gradx_gradient_subtype").val(),o=a.gx("#gradx_gradient_subtype2").val();a.direction=s+" "+o,a.apply_style(a.panel,a.get_style_value())}else"left"!==this.direction&&a.gx("#gradx_gradient_subtype").val(this.direction);a.gx("#gradx_gradient_subtype").change(function(){if("linear"===a.type)a.direction=a.gx(this).val();else{var e=a.gx(this).val(),t=a.gx("#gradx_gradient_subtype2").val();a.direction=e+" "+t}a.apply_style(a.panel,a.get_style_value())}),a.gx("#gradx_gradient_subtype2").change(function(){var e=a.gx("#gradx_gradient_subtype").val(),t=a.gx(this).val();a.direction=e+" "+t,a.apply_style(a.panel,a.get_style_value())}),a.gx("#gradx_radial_gradient_size").change(function(){a.shape=a.gx(this).val(),a.apply_style(a.panel,a.get_style_value())}),a.gx("#gradx_show_code").click(function(){a.code_shown?(a.code_shown=!1,a.gx("#gradx_show_code span").text("show the code"),a.gx("#gradx_code").hide()):(a.gx("#gradx_show_code span").text("hide the code"),a.gx("#gradx_code").show(),a.code_shown=!0)}),a.code_shown&&(a.gx("#gradx_show_code span").text("hide the code"),a.gx("#gradx_code").show()),a.add_event(document.getElementById("gradx_slider_info"),"mouseout",function(){a.slider_hovered[e]=!1}),a.add_event(document.getElementById("gradx_slider_info"),"mouseover",function(){a.slider_hovered[e]=!0})}};a.load_jQ(),t.mixin(n,r);for(var o in n)a[o]=n[o];a.load_gradx(e,a.sliders),a.apply_default_styles()};return u}),e("skylark-ui-gradienter/main",["./Gradienter"],function(e){return e}),e("skylark-ui-gradienter",["skylark-ui-gradienter/main"],function(e){return e})},this);
//# sourceMappingURL=sourcemaps/skylark-ui-gradienter.js.map
